[gd_scene load_steps=17 format=3 uid="uid://dftqgscgou0po"]

[ext_resource type="Texture2D" uid="uid://bmmhhij0uxb26" path="res://assets/background.png" id="1_5vw27"]
[ext_resource type="Script" uid="uid://xjqqwks4jnbg" path="res://scripts/spiders.gd" id="1_ig7tw"]
[ext_resource type="Texture2D" uid="uid://bqnn1m8fx08fe" path="res://assets/spider.png" id="2_0xm2m"]
[ext_resource type="PackedScene" uid="uid://lwbm555q4l6v" path="res://scene/npc.tscn" id="2_5vw27"]
[ext_resource type="PackedScene" uid="uid://dmo6ch2xreba2" path="res://living_room.tscn" id="2_kek77"]
[ext_resource type="PackedScene" uid="uid://dcv6rxbagi8t0" path="res://scene/destination.tscn" id="3_kek77"]
[ext_resource type="AudioStream" uid="uid://df7tkluxjl5au" path="res://assets/SFX/spider.ogg" id="4_kek77"]
[ext_resource type="AudioStream" uid="uid://bat8y31tjwrwr" path="res://assets/SFX/prototypejenaimarre.ogg" id="8_5vw27"]
[ext_resource type="Texture2D" uid="uid://ddtadj4ipd1r0" path="res://assets/arrow.png" id="8_kek77"]
[ext_resource type="FontFile" uid="uid://cuq8cid3txxts" path="res://assets/fonts/Unkempt-Regular.ttf" id="9_efxa6"]
[ext_resource type="Script" path="res://countdown.gd" id="9_ycdy4"]
[ext_resource type="Script" uid="uid://le42puuhmucy" path="res://move_rooms.gd" id="13_vivmo"]
[ext_resource type="PackedScene" path="res://bath_room.tscn" id="13_w48qg"]
[ext_resource type="PackedScene" uid="uid://7j1od1qia3u1" path="res://kitchen_room.tscn" id="14_w48qg"]

[sub_resource type="SpriteFrames" id="SpriteFrames_5vw27"]

[sub_resource type="GDScript" id="GDScript_272bh"]
resource_name = "fear_bar"
script/source = "extends ProgressBar
func _ready() -> void:
	SignalBus.fear_changed.connect(fear_changed)

func fear_changed():
	self.value = Globals.fear
"

[node name="Main" type="Node2D"]

[node name="NPC" type="Node" parent="."]

[node name="NPC" parent="NPC" node_paths=PackedStringArray("target") instance=ExtResource("2_5vw27")]
position = Vector2(-9, 281)
speed = 1000
target = NodePath("../Destinations/LR")

[node name="spiders" type="Node2D" parent="NPC" node_paths=PackedStringArray("move_sound", "jump_sound")]
script = ExtResource("1_ig7tw")
spider_count = 5
move_speed = 500.0
base_spread = 200.0
spider_scale = 0.6999999999970896
spritesheet = ExtResource("2_0xm2m")
move_sound = NodePath("MovePlayer")
jump_sound = NodePath("JumpPlayer")

[node name="JumpPlayer" type="AudioStreamPlayer" parent="NPC/spiders"]

[node name="MovePlayer" type="AudioStreamPlayer" parent="NPC/spiders"]
stream = ExtResource("4_kek77")

[node name="MoveArea" type="Area2D" parent="NPC/spiders"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="NPC/spiders/MoveArea"]
polygon = PackedVector2Array(2, -190, 604, 160, -6, 515, -615, 163)

[node name="MoveArea2" type="Area2D" parent="NPC/spiders"]
position = Vector2(-1912, -5)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="NPC/spiders/MoveArea2"]
polygon = PackedVector2Array(2, -190, 604, 160, -6, 515, -615, 163)

[node name="MoveArea3" type="Area2D" parent="NPC/spiders"]
position = Vector2(1920, -3)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="NPC/spiders/MoveArea3"]
polygon = PackedVector2Array(616, 157, 353, 0, 250, 58, 0, -94, -85, -44, -174, -90, -611, 163, 5, 514)

[node name="Destinations" type="Node" parent="NPC"]

[node name="LR" parent="NPC/Destinations" node_paths=PackedStringArray("linked_destinations") instance=ExtResource("3_kek77")]
position = Vector2(-112, 230)
linked_destinations = [NodePath("../LR2"), NodePath("../LR3"), NodePath("../LRTransitionB")]
destination_orientation = Array[int]([3, 0, 2])

[node name="LR2" parent="NPC/Destinations" node_paths=PackedStringArray("linked_destinations") instance=ExtResource("3_kek77")]
position = Vector2(154, 365)
linked_destinations = [NodePath("../LR5"), NodePath("../LR"), NodePath("../LRTransitionK")]
destination_orientation = Array[int]([2, 0, 1])

[node name="LR3" parent="NPC/Destinations" node_paths=PackedStringArray("linked_destinations") instance=ExtResource("3_kek77")]
position = Vector2(-330, 47)
linked_destinations = [NodePath("../LRJobBook"), NodePath("../LRJobPump"), NodePath("../LR")]
destination_orientation = Array[int]([2, 1, 3])

[node name="LR4" parent="NPC/Destinations" node_paths=PackedStringArray("linked_destinations") instance=ExtResource("3_kek77")]
position = Vector2(452, 206)
linked_destinations = [NodePath("../LRJobTV"), NodePath("../LRTransitionK")]
destination_orientation = Array[int]([0, 2])

[node name="LR5" parent="NPC/Destinations" node_paths=PackedStringArray("linked_destinations") instance=ExtResource("3_kek77")]
position = Vector2(0, 457)
linked_destinations = [NodePath("../LR2"), NodePath("../LRTransitionB")]
destination_orientation = Array[int]([1, 0])

[node name="LRJobTV" parent="NPC/Destinations" node_paths=PackedStringArray("linked_destinations") instance=ExtResource("3_kek77")]
position = Vector2(190, 23)
cause_stop = true
stop_duration = 5
orientation = 1
linked_destinations = [NodePath("../LR4"), NodePath("../LRJobPump")]
destination_orientation = Array[int]([3, 0])

[node name="LRJobPump" parent="NPC/Destinations" node_paths=PackedStringArray("linked_destinations") instance=ExtResource("3_kek77")]
position = Vector2(-79, -93)
cause_stop = true
stop_duration = 2
orientation = 1
linked_destinations = [NodePath("../LRJobTV"), NodePath("../LR3")]
destination_orientation = Array[int]([3, 2])

[node name="LRJobBook" parent="NPC/Destinations" node_paths=PackedStringArray("linked_destinations") instance=ExtResource("3_kek77")]
position = Vector2(-453, 151)
cause_stop = true
stop_duration = 4
linked_destinations = [NodePath("../LR3"), NodePath("../LRTransitionB")]
destination_orientation = Array[int]([1, 3])

[node name="LRTransitionK" parent="NPC/Destinations" node_paths=PackedStringArray("linked_destinations", "teleport_destination") instance=ExtResource("3_kek77")]
position = Vector2(313, 293)
linked_destinations = [NodePath("../LR2"), NodePath("../LR4")]
destination_orientation = Array[int]([2, 1])
teleport_destination = NodePath("../KTransLR")

[node name="LRTransitionB" parent="NPC/Destinations" node_paths=PackedStringArray("linked_destinations", "teleport_destination") instance=ExtResource("3_kek77")]
position = Vector2(-259, 321)
linked_destinations = [NodePath("../LR"), NodePath("../LRJobBook"), NodePath("../LR5")]
destination_orientation = Array[int]([1, 0, 3])
teleport_destination = NodePath("../BTransLR")

[node name="K" parent="NPC/Destinations" node_paths=PackedStringArray("linked_destinations") instance=ExtResource("3_kek77")]
position = Vector2(1920, 209)
linked_destinations = [NodePath("../K2"), NodePath("../KJobOven"), NodePath("../KTransLR"), NodePath("../KTransB")]
destination_orientation = Array[int]([1, 0, 2, 3])

[node name="K2" parent="NPC/Destinations" node_paths=PackedStringArray("linked_destinations") instance=ExtResource("3_kek77")]
position = Vector2(2099, 109)
linked_destinations = [NodePath("../K"), NodePath("../K3"), NodePath("../KJobWater")]
destination_orientation = Array[int]([2, 0, 3])

[node name="K3" parent="NPC/Destinations" node_paths=PackedStringArray("linked_destinations") instance=ExtResource("3_kek77")]
position = Vector2(1919, 4)
linked_destinations = [NodePath("../K2"), NodePath("../KJobOven")]
destination_orientation = Array[int]([3, 2])

[node name="K4" parent="NPC/Destinations" node_paths=PackedStringArray("linked_destinations") instance=ExtResource("3_kek77")]
position = Vector2(1925, 408)
linked_destinations = [NodePath("../KTransLR"), NodePath("../KTransB")]
destination_orientation = Array[int]([0, 1])

[node name="K5" parent="NPC/Destinations" node_paths=PackedStringArray("linked_destinations") instance=ExtResource("3_kek77")]
position = Vector2(2269, 208)
linked_destinations = [NodePath("../KTransB"), NodePath("../KJobWater")]
destination_orientation = Array[int]([2, 0])

[node name="KJobFridge" parent="NPC/Destinations" node_paths=PackedStringArray("linked_destinations") instance=ExtResource("3_kek77")]
position = Vector2(1560, 210)
cause_stop = true
stop_duration = 4
linked_destinations = [NodePath("../KTransLR"), NodePath("../KJobOven")]
destination_orientation = Array[int]([3, 1])

[node name="KJobOven" parent="NPC/Destinations" node_paths=PackedStringArray("linked_destinations") instance=ExtResource("3_kek77")]
position = Vector2(1738, 106)
cause_stop = true
stop_duration = 2
linked_destinations = [NodePath("../KJobFridge"), NodePath("../K3"), NodePath("../K")]
destination_orientation = Array[int]([2, 1, 3])

[node name="KJobWater" parent="NPC/Destinations" node_paths=PackedStringArray("linked_destinations") instance=ExtResource("3_kek77")]
position = Vector2(2179, 157)
cause_stop = true
stop_duration = 3
orientation = 1
linked_destinations = [NodePath("../K2"), NodePath("../K5")]
destination_orientation = Array[int]([0, 3])

[node name="KTransLR" parent="NPC/Destinations" node_paths=PackedStringArray("linked_destinations", "teleport_destination") instance=ExtResource("3_kek77")]
position = Vector2(1747, 309)
orientation = 1
linked_destinations = [NodePath("../K"), NodePath("../KJobFridge"), NodePath("../K4")]
destination_orientation = Array[int]([1, 0, 3])
teleport_destination = NodePath("../LRTransitionK")

[node name="KTransB" parent="NPC/Destinations" node_paths=PackedStringArray("linked_destinations", "teleport_destination") instance=ExtResource("3_kek77")]
position = Vector2(2094, 308)
linked_destinations = [NodePath("../K"), NodePath("../K4"), NodePath("../K5")]
destination_orientation = Array[int]([0, 2, 1])
teleport_destination = NodePath("../BTransK")

[node name="B" parent="NPC/Destinations" node_paths=PackedStringArray("linked_destinations") instance=ExtResource("3_kek77")]
position = Vector2(-1776, 228)
linked_destinations = [NodePath("../BTransLR"), NodePath("../BJobPiss"), NodePath("../B3"), NodePath("../B6")]
destination_orientation = Array[int]([3, 1, 2, 0])

[node name="B2" parent="NPC/Destinations" node_paths=PackedStringArray("linked_destinations") instance=ExtResource("3_kek77")]
position = Vector2(-1920, 433)
linked_destinations = [NodePath("../BTransLR"), NodePath("../B3")]
destination_orientation = Array[int]([1, 0])

[node name="B3" parent="NPC/Destinations" node_paths=PackedStringArray("linked_destinations") instance=ExtResource("3_kek77")]
position = Vector2(-2027, 368)
linked_destinations = [NodePath("../B"), NodePath("../BTransK"), NodePath("../B2")]
destination_orientation = Array[int]([1, 0, 3])

[node name="B4" parent="NPC/Destinations" node_paths=PackedStringArray("linked_destinations") instance=ExtResource("3_kek77")]
position = Vector2(-1715, 67)
linked_destinations = [NodePath("../BJobPiss"), NodePath("../B6")]
destination_orientation = Array[int]([3, 2])

[node name="B5" parent="NPC/Destinations" node_paths=PackedStringArray("linked_destinations") instance=ExtResource("3_kek77")]
position = Vector2(-1517, 199)
linked_destinations = [NodePath("../BJobPiss"), NodePath("../BTransLR")]
destination_orientation = Array[int]([0, 2])

[node name="B6" parent="NPC/Destinations" node_paths=PackedStringArray("linked_destinations") instance=ExtResource("3_kek77")]
position = Vector2(-1882, 164)
linked_destinations = [NodePath("../B4"), NodePath("../B"), NodePath("../BTransK"), NodePath("../BJobBath")]
destination_orientation = Array[int]([1, 3, 2, 0])

[node name="BJobPiss" parent="NPC/Destinations" node_paths=PackedStringArray("linked_destinations") instance=ExtResource("3_kek77")]
position = Vector2(-1612, 132)
cause_stop = true
stop_duration = 5
orientation = 2
linked_destinations = [NodePath("../B5"), NodePath("../B4"), NodePath("../B")]
destination_orientation = Array[int]([3, 0, 2])

[node name="BJobBath" parent="NPC/Destinations" node_paths=PackedStringArray("linked_destinations") instance=ExtResource("3_kek77")]
position = Vector2(-2104, 31)
linked_destinations = [NodePath("../BJobWater"), NodePath("../B6")]
destination_orientation = Array[int]([2, 3])

[node name="BJobWater" parent="NPC/Destinations" node_paths=PackedStringArray("linked_destinations") instance=ExtResource("3_kek77")]
position = Vector2(-2315, 168)
linked_destinations = [NodePath("../BJobBath"), NodePath("../BTransK")]
destination_orientation = Array[int]([1, 3])

[node name="BTransLR" parent="NPC/Destinations" node_paths=PackedStringArray("linked_destinations", "teleport_destination") instance=ExtResource("3_kek77")]
position = Vector2(-1681, 286)
linked_destinations = [NodePath("../B"), NodePath("../B5"), NodePath("../B2")]
destination_orientation = Array[int]([0, 1, 2])
teleport_destination = NodePath("../LRTransitionB")

[node name="BTransK" parent="NPC/Destinations" node_paths=PackedStringArray("linked_destinations", "teleport_destination") instance=ExtResource("3_kek77")]
position = Vector2(-2123, 313)
orientation = 1
linked_destinations = [NodePath("../BJobWater"), NodePath("../B6"), NodePath("../B3")]
destination_orientation = Array[int]([0, 1, 3])
teleport_destination = NodePath("../KTransB")

[node name="Camera" type="Camera2D" parent="."]

[node name="Background" type="Sprite2D" parent="Camera"]
z_index = -5
scale = Vector2(1.4762552, 1.476255)
texture = ExtResource("1_5vw27")

[node name="Destination" parent="." instance=ExtResource("3_kek77")]

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
sprite_frames = SubResource("SpriteFrames_5vw27")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="ProgressBar" type="ProgressBar" parent="CanvasLayer"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 1820.6666
offset_top = 107.0
offset_right = 747.6333
offset_bottom = -819.3334
grow_horizontal = 2
grow_vertical = 2
rotation = 1.5707964
script = SubResource("GDScript_272bh")

[node name="ButtonLeft" type="TextureButton" parent="CanvasLayer"]
offset_left = 494.0
offset_top = 767.0
offset_right = 706.0
offset_bottom = 925.0
texture_normal = ExtResource("8_kek77")

[node name="ButtonRight" type="TextureButton" parent="CanvasLayer"]
offset_left = 1259.0
offset_top = 767.0
offset_right = 1471.0
offset_bottom = 925.0
texture_normal = ExtResource("8_kek77")
flip_h = true

[node name="Label" type="Label" parent="CanvasLayer"]
offset_left = 95.0
offset_top = 75.0
offset_right = 281.0
offset_bottom = 153.0
theme_override_fonts/font = ExtResource("9_efxa6")
theme_override_font_sizes/font_size = 64
text = "00:00"
script = ExtResource("9_ycdy4")

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]
stream = ExtResource("8_5vw27")
volume_db = -10.0
autoplay = true
parameters/looping = true

[node name="Rooms" type="Node2D" parent="."]
script = ExtResource("13_vivmo")

[node name="KitchenRoom" parent="Rooms" instance=ExtResource("14_w48qg")]
position = Vector2(1920, -6)

[node name="KitchenRoom3" parent="Rooms" instance=ExtResource("13_w48qg")]
position = Vector2(-1920, 0)

[node name="LivingRoom" parent="Rooms" instance=ExtResource("2_kek77")]

[connection signal="input_event" from="NPC/spiders/MoveArea" to="NPC/spiders" method="_on_move_area_input_event"]
[connection signal="input_event" from="NPC/spiders/MoveArea2" to="NPC/spiders" method="_on_move_area_input_event"]
[connection signal="input_event" from="NPC/spiders/MoveArea3" to="NPC/spiders" method="_on_move_area_input_event"]
[connection signal="pressed" from="CanvasLayer/ButtonLeft" to="Rooms" method="_on_button_left_pressed"]
[connection signal="pressed" from="CanvasLayer/ButtonRight" to="Rooms" method="_on_button_right_pressed"]
